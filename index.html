<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>BISHA OS v19</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">

    <style>
        /* ==========================================================================
           1. CORE ENGINE
           ========================================================================== */
        :root {
            --bg: #000000;
            --card: #0c0c0c;
            --border: #1f1f1f;
            --primary: #00ff9d;
            --primary-dim: rgba(0, 255, 157, 0.1);
            
            --font-main: 'Inter', sans-serif;
            --font-code: 'JetBrains Mono', monospace;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }
        
        body { 
            margin: 0; padding: 0; 
            background: var(--bg); color: #fff; 
            font-family: var(--font-main); 
            height: 100vh; overflow: hidden;
            touch-action: pan-y;
        }

        /* ==========================================================================
           2. LOCK SCREEN (STABLE VERSION)
           ========================================================================== */
        #lock {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 99999; /* Max Z-Index */
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1);
        }
        
        .scanner-box {
            width: 80px; height: 80px; border: 2px solid #333; border-radius: 16px;
            display: flex; align-items: center; justify-content: center; position: relative;
            margin-bottom: 20px; overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 255, 157, 0.1);
        }
        .scan-bar {
            position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: var(--primary); box-shadow: 0 0 10px var(--primary);
            animation: scan 2s infinite ease-in-out;
        }
        @keyframes scan { 0% { top: 0; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

        .lock-msg {
            font-family: var(--font-code); font-size: 14px; color: var(--primary);
            margin-bottom: 40px; letter-spacing: 1px;
        }

        .pin-row { display: flex; gap: 20px; margin-bottom: 50px; }
        .p-dot { width: 12px; height: 12px; border-radius: 50%; border: 1px solid #444; transition: 0.2s; background: #111; }
        .p-dot.filled { background: var(--primary); border-color: var(--primary); box-shadow: 0 0 10px var(--primary); transform: scale(1.2); }
        .p-dot.err { background: #ff3b30; border-color: #ff3b30; }

        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; }
        .k-btn { 
            width: 75px; height: 75px; border-radius: 50%; background: rgba(255,255,255,0.08); 
            display: flex; justify-content: center; align-items: center; 
            font-size: 28px; font-family: var(--font-code); color: #fff;
            border: 1px solid rgba(255,255,255,0.05); transition: 0.1s;
            cursor: pointer; touch-action: manipulation;
        }
        .k-btn:active { background: var(--primary); color: #000; transform: scale(0.9); }

        /* ==========================================================================
           3. APP INTERFACE
           ========================================================================== */
        #app {
            height: 100%; overflow-y: auto; display: none; opacity: 0;
            padding-bottom: 140px; transition: opacity 0.6s;
        }

        .header {
            position: sticky; top: 0; z-index: 100;
            background: rgba(0,0,0,0.95); border-bottom: 1px solid var(--primary-dim);
            padding: 20px; display: flex; justify-content: space-between; align-items: center;
            backdrop-filter: blur(10px);
        }
        .brand { font-family: var(--font-main); font-weight: 900; font-size: 22px; letter-spacing: 1px; }
        .brand span { color: var(--primary); }

        /* FEATURES SECTION */
        .features { padding: 0 20px; margin-bottom: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        
        .f-card {
            background: rgba(0, 255, 157, 0.05); border: 1px solid var(--primary-dim);
            padding: 15px; border-radius: 8px; position: relative;
        }
        .f-head { font-size: 10px; color: #888; text-transform: uppercase; font-family: var(--font-code); }
        .f-body { font-size: 18px; font-weight: 800; color: #fff; margin-top: 5px; }
        
        .status-txt { font-size: 10px; color: var(--primary); margin-top: 5px; font-weight: 700; animation: blink 2s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }

        .loot-trigger {
            grid-column: span 2; background: linear-gradient(90deg, #111, #222); border: 1px solid var(--primary);
            color: var(--primary); font-family: var(--font-code); font-weight: 800; text-transform: uppercase;
            padding: 15px; text-align: center; cursor: pointer; letter-spacing: 2px;
        }
        .loot-trigger:active { background: var(--primary); color: #000; }

        /* FEED & CARDS */
        .feed { padding: 0 20px; display: flex; flex-direction: column; gap: 25px; }

        .card {
            background: #0a0a0a; border-left: 2px solid #333; padding: 0;
            position: relative; transition: 0.3s;
        }
        .card.today { border-left: 4px solid var(--primary); background: linear-gradient(90deg, rgba(0,255,157,0.05), transparent); }
        
        /* DONE STATE */
        .card.done { opacity: 0.5; filter: grayscale(1); border-left-color: #333; }
        .card.done * { text-decoration: line-through; text-decoration-thickness: 2px; }
        .card.done .check { border-color: #333; background: transparent; }
        .card.done .check i { display: block; color: #555; }

        .c-header {
            display: flex; justify-content: space-between; align-items: center; padding: 15px;
            background: #0f0f0f; border-bottom: 1px solid #1a1a1a;
        }
        .date { font-size: 22px; font-weight: 900; }
        .day { font-size: 12px; color: var(--primary); font-family: var(--font-code); }

        .check {
            width: 35px; height: 35px; border: 2px solid #333; display: flex; align-items: center; justify-content: center;
            cursor: pointer; background: #000; transition: 0.2s; touch-action: manipulation;
        }
        .check.active { background: var(--primary); border-color: var(--primary); box-shadow: 0 0 15px var(--primary); }
        .check i { display: none; color: #000; font-weight: 900; }
        .check.active i { display: block; text-decoration: none !important; }

        .row { display: flex; align-items: center; padding: 12px 15px; border-bottom: 1px solid #111; }
        
        .badge { 
            font-family: var(--font-code); font-size: 9px; font-weight: 800; color: #000;
            padding: 4px 0; width: 60px; text-align: center; margin-right: 15px;
            clip-path: polygon(10% 0, 100% 0, 100% 100%, 0% 100%, 0% 25%);
        }
        
        /* COLORS */
        .b-1 { background: #ff9f0a; box-shadow: 0 0 10px #ff9f0a; } 
        .b-2 { background: #0a84ff; box-shadow: 0 0 10px #0a84ff; color: #fff; } 
        .b-3 { background: #ff375f; box-shadow: 0 0 10px #ff375f; color: #fff; } 
        .b-4 { background: #00ff9d; box-shadow: 0 0 15px #00ff9d; } 
        .b-5 { background: #bf5af2; box-shadow: 0 0 10px #bf5af2; color: #fff; } 
        .b-6 { background: #333; color: #888; border: 1px solid #555; } 

        .gym-area { padding: 15px; background: rgba(0,0,0,0.3); }
        .gym-btn { 
            width: 100%; background: #111; border: 1px solid #333; color: var(--primary);
            padding: 12px; font-family: var(--font-code); font-size: 11px; cursor: pointer;
            text-transform: uppercase; letter-spacing: 1px;
        }

        /* DOCK */
        .dock {
            position: fixed; bottom: 0; left: 0; width: 100%; 
            background: rgba(0,0,0,0.95); border-top: 1px solid var(--primary-dim);
            padding: 15px 20px; padding-bottom: max(15px, env(safe-area-inset-bottom));
            z-index: 500; display: flex; justify-content: space-between; align-items: center;
        }
        .bpm-wrap { font-family: var(--font-code); font-size: 12px; color: var(--primary); display: flex; align-items: center; gap: 5px; }
        .heart { width: 8px; height: 8px; background: var(--primary); transform: rotate(45deg); animation: beat 1s infinite; }
        @keyframes beat { 0% { transform: scale(1) rotate(45deg); } 50% { transform: scale(1.3) rotate(45deg); } 100% { transform: scale(1) rotate(45deg); } }

    </style>
</head>
<body>

    <div id="lock">
        <div class="scanner-box">
            <div class="scan-bar"></div>
            <div style="font-size:30px">ðŸ”’</div>
        </div>
        <div class="lock-msg">SECURITY CLEARANCE REQ.</div>
        
        <div class="pin-row">
            <div class="p-dot" id="d1"></div><div class="p-dot" id="d2"></div>
            <div class="p-dot" id="d3"></div><div class="p-dot" id="d4"></div>
        </div>

        <div class="keypad">
            <div class="k-btn" onclick="tap(1)">1</div><div class="k-btn" onclick="tap(2)">2</div><div class="k-btn" onclick="tap(3)">3</div>
            <div class="k-btn" onclick="tap(4)">4</div><div class="k-btn" onclick="tap(5)">5</div><div class="k-btn" onclick="tap(6)">6</div>
            <div class="k-btn" onclick="tap(7)">7</div><div class="k-btn" onclick="tap(8)">8</div><div class="k-btn" onclick="tap(9)">9</div>
            <div class="k-btn" style="opacity:0"></div><div class="k-btn" onclick="tap(0)">0</div><div class="k-btn" onclick="del()">âŒ«</div>
        </div>
    </div>

    <div id="app">
        <div class="header">
            <div class="brand">BISHA <span>OS</span></div>
            <div style="font-family:var(--font-code); font-size:10px; color:#666">v19.0</div>
        </div>

        <div class="features">
            <div class="f-card">
                <div class="f-head">FASTING STATUS</div>
                <div class="f-body" id="fast-timer">16:00</div>
                <div class="status-txt">FAT BURNING MODE</div>
            </div>
            
            <div class="f-card">
                <div class="f-head">HEART RATE</div>
                <div class="f-body" style="color:var(--primary)">65 <span style="font-size:12px">BPM</span></div>
                <div style="height:2px; width:100%; background:#333; margin-top:10px; position:relative; overflow:hidden">
                    <div style="width:20%; height:100%; background:var(--primary); animation: moveLine 1s infinite linear"></div>
                </div>
            </div>

            <div class="loot-trigger" onclick="loot()">ðŸŽ² GENERATE LOOT TASK</div>
        </div>

        <div class="feed" id="feed"></div>
    </div>

    <div class="dock">
        <div class="bpm-wrap"><div class="heart"></div> SYSTEM ONLINE</div>
        <div style="font-family:var(--font-code); font-size:12px; color:#666" id="pct">0%</div>
    </div>

<script>
    const PASS = "5858";
    const WIKI = "https://musclewiki.com"; 

    // DATA
    const DATA = [
        {d:"11 JAN", w:"E DIEL", s:[{t:"10:00", c:"b-1", n:"MÃ«ngjes", d:"Krepa"},{t:"14:00", c:"b-3", n:"Dreka", d:"SupÃ«"},{t:"20:00", c:"b-6", n:"Darka", d:"Kos"}], g:{on:false}},
        {d:"12 JAN", w:"E HÃ‹NÃ‹", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"3 VezÃ«"},{t:"08:00", c:"b-2", n:"ShkollÃ«", d:"Deri 15:00"},{t:"15:30", c:"b-3", n:"Dreka", d:"Fasule"},{t:"17:00", c:"b-4", n:"GYM", d:"Chest"},{t:"19:30", c:"b-5", n:"Studim", d:"Inxhinieri"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"CHEST", x:["Bench Press","Incline","Dips"]}},
        {d:"13 JAN", w:"E MARTÃ‹", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"Tost"},{t:"08:00", c:"b-2", n:"ShkollÃ«", d:"Snack"},{t:"15:30", c:"b-3", n:"Dreka", d:"Patate"},{t:"17:00", c:"b-4", n:"GYM", d:"Back"},{t:"19:30", c:"b-5", n:"Studim", d:"Lexim"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"BACK", x:["Deadlift","Pullups","Rows"]}},
        {d:"14 JAN", w:"E MÃ‹RKURÃ‹", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"TÃ«rshÃ«rÃ«"},{t:"15:30", c:"b-3", n:"Dreka", d:"Makarona"},{t:"17:00", c:"b-5", n:"Relax", d:"Ecje"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:false}},
        {d:"15 JAN", w:"E ENJTE", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"OmÃ«letÃ«"},{t:"15:30", c:"b-3", n:"Dreka", d:"Presh"},{t:"17:00", c:"b-4", n:"GYM", d:"Legs"},{t:"19:30", c:"b-5", n:"Studim", d:"Detyra"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"LEGS", x:["Squat","Leg Press","Calves"]}},
        {d:"16 JAN", w:"E PREMTE", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"GjizÃ«"},{t:"15:30", c:"b-3", n:"Dreka", d:"PulÃ«"},{t:"17:00", c:"b-4", n:"GYM", d:"Upper"},{t:"19:30", c:"b-5", n:"Studim", d:"Projekt"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"UPPER", x:["Press","Raises","Arms"]}},
        {d:"17 JAN", w:"E SHTUNÃ‹", s:[{t:"09:00", c:"b-1", n:"MÃ«ngjes", d:"VezÃ«"},{t:"14:00", c:"b-3", n:"Dreka", d:"ShtÃ«pie"},{t:"16:00", c:"b-4", n:"AKTIV", d:"Vrap"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"CARDIO", x:["Run 30min","Abs"]}},
        {d:"18 JAN", w:"E DIEL", s:[{t:"10:00", c:"b-1", n:"MÃ«ngjes", d:"Krepa"},{t:"14:00", c:"b-3", n:"Dreka", d:"SupÃ«"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:false}},
        {d:"19 JAN", w:"E HÃ‹NÃ‹", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"Scrambled"},{t:"15:30", c:"b-3", n:"Dreka", d:"Fasule"},{t:"17:00", c:"b-4", n:"GYM", d:"Chest"},{t:"19:30", c:"b-5", n:"Studim", d:"Inxhinieri"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"PUSH", x:["Incline","Flys"]}},
        {d:"20 JAN", w:"E MARTÃ‹", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"TÃ«rshÃ«rÃ«"},{t:"15:30", c:"b-3", n:"Dreka", d:"Musaka"},{t:"17:00", c:"b-4", n:"GYM", d:"Back"},{t:"19:30", c:"b-5", n:"Studim", d:"Inxhinieri"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"PULL", x:["Lat Pull","Curls"]}},
        {d:"21 JAN", w:"E MÃ‹RKURÃ‹", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"Tost"},{t:"15:30", c:"b-3", n:"Dreka", d:"Burani"},{t:"17:00", c:"b-5", n:"Relax", d:"-"}-{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:false}},
        {d:"22 JAN", w:"E ENJTE", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"VezÃ«"},{t:"15:30", c:"b-3", n:"Dreka", d:"Presh"},{t:"17:00", c:"b-4", n:"GYM", d:"Legs"},{t:"19:30", c:"b-5", n:"Studim", d:"Inxhinieri"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"LEGS", x:["Squat","Lunges"]}},
        {d:"23 JAN", w:"E PREMTE", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"GjizÃ«"},{t:"15:30", c:"b-3", n:"Dreka", d:"Peshk"},{t:"17:00", c:"b-4", n:"GYM", d:"Full"},{t:"19:30", c:"b-5", n:"Studim", d:"Inxhinieri"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"FULL BODY", x:["Clean & Press","Squat"]}},
        {d:"24 JAN", w:"E SHTUNÃ‹", s:[{t:"09:00", c:"b-1", n:"MÃ«ngjes", d:"OmÃ«letÃ«"},{t:"14:00", c:"b-3", n:"Dreka", d:"ShtÃ«pie"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:false}},
        {d:"25 JAN", w:"E DIEL", s:[{t:"10:00", c:"b-1", n:"MÃ«ngjes", d:"Makarona"},{t:"14:00", c:"b-3", n:"Dreka", d:"SupÃ«"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:false}},
        {d:"26 JAN", w:"E HÃ‹NÃ‹", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"OmÃ«letÃ«"},{t:"15:30", c:"b-3", n:"Dreka", d:"Fasule"},{t:"17:00", c:"b-4", n:"GYM", d:"Chest"},{t:"19:30", c:"b-5", n:"Studim", d:"Inxhinieri"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"PUSH", x:["Bench","Pushups"]}},
        {d:"27 JAN", w:"E MARTÃ‹", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"Tost"},{t:"15:30", c:"b-3", n:"Dreka", d:"Speca"},{t:"17:00", c:"b-4", n:"GYM", d:"Back"},{t:"19:30", c:"b-5", n:"Studim", d:"Inxhinieri"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"PULL", x:["Rows","Curls"]}},
        {d:"28 JAN", w:"E MÃ‹RKURÃ‹", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"TÃ«rshÃ«rÃ«"},{t:"15:30", c:"b-3", n:"Dreka", d:"Bamje"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:false}},
        {d:"29 JAN", w:"E ENJTE", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"VezÃ«"},{t:"15:30", c:"b-3", n:"Dreka", d:"Qofte"},{t:"17:00", c:"b-4", n:"GYM", d:"Legs"},{t:"19:30", c:"b-5", n:"Studim", d:"Inxhinieri"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"LEGS", x:["Leg Press","Squat"]}},
        {d:"30 JAN", w:"E PREMTE", s:[{t:"06:00", c:"b-1", n:"MÃ«ngjes", d:"SanduiÃ§"},{t:"15:30", c:"b-3", n:"Dreka", d:"PulÃ«"},{t:"17:00", c:"b-4", n:"GYM", d:"Upper"},{t:"19:30", c:"b-5", n:"Studim", d:"Inxhinieri"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"UPPER", x:["Press","Flys"]}},
        {d:"31 JAN", w:"E SHTUNÃ‹", s:[{t:"10:00", c:"b-1", n:"MÃ«ngjes", d:"LirÃ«"},{t:"14:00", c:"b-3", n:"Dreka", d:"FESTO"},{t:"18:00", c:"b-4", n:"CHECK", d:"Peshimi"},{t:"22:30", c:"b-6", n:"GjumÃ«", d:"8h"}], g:{on:true, t:"CHECK", x:["Peshimi","Foto"]}}
    ];

    let pin = "";
    
    function tap(n) {
        if(pin.length < 4) {
            pin += n;
            drawDots();
            if(navigator.vibrate) navigator.vibrate(10);
            if(pin.length === 4) auth();
        }
    }
    
    function del() { pin = pin.slice(0,-1); drawDots(); }
    
    function drawDots() {
        for(let i=1; i<=4; i++) {
            let d = document.getElementById("d"+i);
            if(i <= pin.length) d.classList.add("filled");
            else d.classList.remove("filled");
        }
    }

    function auth() {
        if(pin === PASS) {
            document.getElementById("lock").style.transform = "translateY(-100%)";
            setTimeout(() => {
                document.getElementById("app").style.display = "block";
                setTimeout(() => {
                    document.getElementById("app").style.opacity = 1;
                    render();
                    startClock();
                }, 50);
            }, 400);
        } else {
            pin = ""; drawDots();
            document.querySelectorAll(".p-dot").forEach(d => d.classList.add("err"));
            if(navigator.vibrate) navigator.vibrate(200);
            setTimeout(() => document.querySelectorAll(".p-dot").forEach(d => d.classList.remove("err")), 300);
        }
    }

    function render() {
        const feed = document.getElementById("feed");
        const todayStr = new Date().getDate() + " JAN"; 
        let c = 0;
        let h = "";

        DATA.forEach((d, i) => {
            const id = "v19_" + i;
            const done = localStorage.getItem(id) === "1";
            if(done) c++;
            
            const isToday = (d.d === todayStr);
            const cls = `card ${isToday ? 'today' : ''} ${done ? 'done' : ''}`;

            let rows = d.s.map(r => `
                <div class="row">
                    <div class="badge ${r.c}">${r.t}</div>
                    <div style="flex:1">
                        <div style="font-weight:700; font-size:14px">${r.n}</div>
                        <div style="font-size:11px; color:#888">${r.d}</div>
                    </div>
                </div>
            `).join("");

            let gym = "";
            if(d.g.on) {
                let exs = d.g.x.map(x => `<div style="padding:5px 0; color:#ddd; font-size:12px">â–ª ${x}</div>`).join("");
                gym = `
                    <div class="gym-area">
                        <div style="color:var(--primary); font-weight:800; font-size:12px; margin-bottom:5px;">${d.g.t} PROTOCOL</div>
                        ${exs}
                        <button class="gym-btn" onclick="window.open('${WIKI}', '_blank')">ACCESS MUSCLEWIKI DB</button>
                    </div>
                `;
            }

            h += `
                <div class="${cls}" id="card-${i}">
                    <div class="c-header">
                        <div>
                            <div class="date">${d.d}</div>
                            <div class="day">${d.w}</div>
                        </div>
                        <div class="check ${done?'active':''}" onclick="toggle(${i})"><i>âœ“</i></div>
                    </div>
                    <div>${rows}</div>
                    ${gym}
                </div>
            `;
        });

        feed.innerHTML = h;
        updateBar(c);
        setTimeout(() => {
            let t = document.querySelector(".today");
            if(t) t.scrollIntoView({behavior:"smooth", block:"center"});
        }, 500);
    }

    function toggle(i) {
        const id = "v19_" + i;
        if(localStorage.getItem(id)) localStorage.removeItem(id);
        else {
            localStorage.setItem(id, "1");
            if(navigator.vibrate) navigator.vibrate(50);
        }
        render();
    }

    function updateBar(c) {
        let p = Math.round((c / DATA.length) * 100);
        document.getElementById("pct").innerText = p + "% COMPLETED";
    }

    function startClock() {
        setInterval(() => {
            const h = new Date().getHours();
            if(h >= 12 && h < 20) {
                document.getElementById("fast-timer").innerText = "EATING WINDOW";
                document.getElementById("fast-timer").style.color = "#00ff9d";
            } else {
                document.getElementById("fast-timer").innerText = "FASTING ACTIVE";
                document.getElementById("fast-timer").style.color = "#ff375f";
            }
        }, 1000);
    }

    function loot() {
        const tasks = ["20 Pushups", "1 Min Plank", "Drink 500ml Water", "50 Jumping Jacks", "Walk 10 Mins"];
        alert("LOOT BOX OPENED: " + tasks[Math.floor(Math.random()*tasks.length)]);
    }

    @keyframes moveLine { 0% { width: 0%; left: 0; } 50% { width: 100%; left: 0; } 100% { width: 0%; left: 100%; } }

</script>
</body>
</html>
