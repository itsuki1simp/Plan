<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>BISHA OS v16 // ALPHA-PRO</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700;800&family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">

    <style>
        /* ==========================================================================
           1. CYBERPUNK ARCHITECTURE - DESIGN SYSTEM
           ========================================================================== 
        */
        :root {
            --bg-deep: #000000;
            --bg-panel: #050505;
            --bg-card: #0c0c0c;
            --bg-row: #111111;
            
            /* NEON CORE PALETTE */
            --primary-neon: #00ff9d;
            --primary-glow: rgba(0, 255, 157, 0.4);
            --secondary-neon: #00e5ff;
            --secondary-glow: rgba(0, 229, 255, 0.4);
            --error-neon: #ff0044;
            --error-glow: rgba(255, 0, 68, 0.4);
            
            --border-std: 1px solid #1a1a1a;
            --border-active: 1px solid var(--primary-neon);
            
            --radius-massive: 38px;
            --radius-medium: 22px;
            --radius-small: 12px;

            --font-code: 'JetBrains Mono', monospace;
            --font-main: 'Inter', sans-serif;

            /* ORIGINAL GRADIENTS FROM SOURCE */
            --g-mor: linear-gradient(135deg, #FF9900, #FF5500);
            --g-sch: linear-gradient(135deg, #00C6FF, #0072FF);
            --g-lun: linear-gradient(135deg, #A8FF78, #78FFD6);
            --g-gym: linear-gradient(135deg, #00ff9d, #00b86e);
            --g-stu: linear-gradient(135deg, #E100FF, #7F00FF);
            --g-sle: linear-gradient(135deg, #333333, #000000);

            --spring: cubic-bezier(0.68, -0.6, 0.32, 1.6);
            --expo: cubic-bezier(0.19, 1, 0.22, 1);
        }

        /* ==========================================================================
           2. GLOBAL MOBILE OPTIMIZATION
           ========================================================================== 
        */
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0;
            -webkit-tap-highlight-color: transparent; 
            outline: none;
            -webkit-user-select: none;
            user-select: none;
        }

        html, body {
            width: 100%;
            height: 100%;
            background-color: var(--bg-deep);
            color: #ffffff;
            font-family: var(--font-main);
            overflow: hidden; /* Body is locked, #mainApp handles scrolling */
            position: fixed;
            -webkit-font-smoothing: antialiased;
        }

        /* ==========================================================================
           3. ADVANCED KEYFRAME ENGINE
           ========================================================================== 
        */
        @keyframes glitch-loop {
            0% { transform: translate(0); text-shadow: 2px 2px var(--error-neon); }
            1% { transform: translate(-2px, 1px); }
            2% { transform: translate(2px, -1px); text-shadow: -2px -2px var(--secondary-neon); }
            3% { transform: translate(0); text-shadow: none; }
            100% { transform: translate(0); }
        }

        @keyframes sweep-light {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: 100%; }
        }

        @keyframes jitter-denial {
            0% { transform: translateX(0) scale(1); }
            20% { transform: translateX(-10px) rotate(-1deg); border-color: var(--error-neon); box-shadow: 0 0 20px var(--error-glow); }
            40% { transform: translateX(10px) rotate(1deg); }
            60% { transform: translateX(-6px); }
            80% { transform: translateX(6px); }
            100% { transform: translateX(0) scale(1); }
        }

        @keyframes card-materialize {
            from { opacity: 0; transform: translateY(40px) scale(0.95); filter: blur(10px); }
            to { opacity: 1; transform: translateY(0) scale(1); filter: blur(0px); }
        }

        @keyframes check-burst {
            0% { transform: scale(1); box-shadow: 0 0 0 rgba(255,255,255,0); }
            50% { transform: scale(1.3); box-shadow: 0 0 30px var(--primary-neon); }
            100% { transform: scale(1); box-shadow: 0 0 10px var(--primary-neon); }
        }

        /* ==========================================================================
           4. LOCK TERMINAL SUBSYSTEM
           ========================================================================== 
        */
        #terminalLock {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.6s var(--expo), transform 0.6s var(--expo);
        }

        .terminal-brand {
            font-family: var(--font-code);
            font-size: 50px;
            font-weight: 800;
            color: var(--primary-neon);
            margin-bottom: 25px;
            animation: glitch-loop 4s infinite linear;
        }

        .terminal-readout {
            font-family: var(--font-code);
            font-size: 11px;
            color: #333;
            text-align: center;
            width: 80%;
            height: 60px;
            margin-bottom: 40px;
            overflow: hidden;
            border-left: 2px solid #111;
            padding-left: 10px;
        }

        .matrix-dots {
            display: flex;
            gap: 22px;
            margin-bottom: 60px;
        }

        .dot-node {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid #222;
            transition: 0.3s var(--spring);
        }

        .dot-node.active {
            background: var(--primary-neon);
            border-color: var(--primary-neon);
            box-shadow: 0 0 20px var(--primary-neon);
            transform: scale(1.4);
        }

        .dot-node.breach {
            background: var(--error-neon);
            border-color: var(--error-neon);
            box-shadow: 0 0 15px var(--error-neon);
        }

        .numpad-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 22px;
        }

        .num-btn {
            width: 82px;
            height: 82px;
            border-radius: 50%;
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.08);
            color: #fff;
            font-family: var(--font-code);
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.1s;
        }

        .num-btn:active {
            background: var(--primary-neon);
            color: #000;
            transform: scale(0.9);
            box-shadow: 0 0 30px var(--primary-glow);
        }

        /* ==========================================================================
           5. MAIN OS SHELL
           ========================================================================== 
        */
        #mainAppShell {
            display: none; /* Injected after unlock */
            height: 100vh;
            width: 100vw;
            overflow-y: auto;
            overflow-x: hidden;
            background: var(--bg-deep);
            padding-bottom: 140px;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        .app-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.88);
            backdrop-filter: blur(30px);
            padding: 22px 25px;
            padding-top: max(22px, env(safe-area-inset-top));
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #181818;
        }

        .app-logo {
            font-family: var(--font-code);
            font-weight: 800;
            font-size: 18px;
            letter-spacing: -1px;
            animation: glitch-loop 5s infinite;
        }

        .app-logo span { color: var(--primary-neon); }

        .app-timer {
            font-family: var(--font-code);
            font-size: 11px;
            background: #0a0a0a;
            color: #555;
            padding: 6px 14px;
            border-radius: 30px;
            border: 1px solid #222;
        }

        .app-feed {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        /* ==========================================================================
           6. COMPONENT: SYSTEM DATA CARD
           ========================================================================== 
        */
        .data-card {
            background: var(--bg-card);
            border-radius: var(--radius-massive);
            border: var(--border-std);
            overflow: hidden;
            transition: all 0.4s var(--expo);
            animation: card-materialize 0.6s var(--expo) both;
            position: relative;
        }

        .data-card.active-today {
            border: 1px solid var(--primary-neon);
            box-shadow: 0 0 40px rgba(0, 255, 157, 0.1);
        }

        .data-card.done-state {
            opacity: 0.45;
            filter: grayscale(1);
        }

        .data-card.done-state .card-title,
        .data-card.done-state .row-name {
            text-decoration: line-through;
            text-decoration-color: var(--primary-neon);
        }

        /* Denial Animation Class */
        .denied-pulse { animation: jitter-denial 0.4s var(--expo); }

        .card-head {
            padding: 24px 30px;
            background: linear-gradient(180deg, #121212, #070707);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #1a1a1a;
        }

        .card-title { font-size: 26px; font-weight: 900; letter-spacing: -1px; }
        .card-subtitle { 
            font-size: 11px; 
            font-family: var(--font-code); 
            color: var(--primary-neon); 
            text-transform: uppercase; 
            margin-top: 4px;
            letter-spacing: 2px;
        }

        .node-switch {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            border: 2.5px solid #2a2a2a;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.4s var(--spring);
        }

        .node-switch.active {
            background: var(--primary-neon);
            border-color: var(--primary-neon);
            color: #000;
            box-shadow: 0 0 20px var(--primary-neon);
            animation: check-burst 0.5s var(--spring);
        }

        .node-switch i { display: none; font-size: 22px; font-weight: 900; }
        .node-switch.active i { display: block; }

        .row-item {
            display: flex;
            align-items: center;
            padding: 18px 30px;
            border-bottom: 1px solid #141414;
        }

        .row-item:last-child { border-bottom: none; }

        .badge-tag {
            font-family: var(--font-code);
            font-size: 9px;
            font-weight: 900;
            padding: 6px 0;
            width: 60px;
            text-align: center;
            border-radius: 12px;
            margin-right: 25px;
            color: #fff;
            border: 1px solid rgba(255,255,255,0.06);
            text-transform: uppercase;
        }

        .row-data h4 { font-size: 15px; font-weight: 700; color: #fff; }
        .row-data p { font-size: 12px; color: #777; margin-top: 3px; font-weight: 500; }

        /* GYM SUB-MODULE */
        .gym-trigger {
            width: 100%;
            padding: 22px;
            background: #111111;
            border: none;
            border-top: 1px solid #222;
            color: #ffffff;
            font-family: var(--font-code);
            font-size: 12px;
            font-weight: 800;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .gym-panel {
            display: none;
            background: #000000;
            padding: 15px 30px 25px;
            border-top: 1px solid #1a1a1a;
        }

        .ex-line {
            display: flex;
            justify-content: space-between;
            padding: 14px 0;
            border-bottom: 1px solid #111;
        }

        .ex-line span { font-size: 14px; font-weight: 600; color: #eee; }
        .ex-line small { font-size: 12px; color: var(--primary-neon); font-family: var(--font-code); }

        .wiki-btn {
            display: block;
            width: 100%;
            padding: 16px;
            margin-top: 25px;
            background: rgba(0, 255, 157, 0.04);
            border: 1px solid var(--primary-neon);
            color: var(--primary-neon);
            border-radius: 50px;
            text-align: center;
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
            text-decoration: none;
            transition: 0.2s;
        }
        
        .wiki-btn:active { background: var(--primary-neon); color: #000; }

        /* ==========================================================================
           7. ALPHA HUD (ADVANCED PROGRESS DOCK)
           ========================================================================== 
        */
        .alpha-hud {
            position: fixed;
            bottom: 35px;
            left: 20px;
            right: 20px;
            background: rgba(8, 8, 8, 0.95);
            backdrop-filter: blur(40px);
            padding: 22px 28px;
            border-radius: 50px;
            border: 1px solid #222;
            z-index: 2000;
            box-shadow: 0 20px 70px rgba(0,0,0,0.95);
        }

        .track-bg {
            height: 12px;
            background: #181818;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 12px;
            position: relative;
        }

        .fill-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-neon), var(--secondary-neon), var(--primary-neon));
            background-size: 200% 100%;
            width: 0%;
            transition: width 1.8s var(--expo);
            position: relative;
            box-shadow: 0 0 25px var(--primary-glow);
        }

        /* Quantum Scanning Light */
        .fill-bar::after {
            content: "";
            position: absolute;
            top: 0; left: -100%; width: 120px; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.7), transparent);
            animation: sweep-light 3s infinite linear;
        }

        .hud-status {
            font-family: var(--font-code);
            font-size: 11px;
            color: #555;
            text-align: center;
            font-weight: 800;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .hud-status b { color: var(--primary-neon); text-shadow: 0 0 5px var(--primary-glow); }

    </style>
</head>
<body>

    <div id="terminalLock">
        <div class="terminal-brand">BISHA_OS</div>
        <div class="terminal-readout" id="bootLogs">
            [SYS] BOOT_PROTOCOL: V16.0_ALPHA<br>
            [SEC] ENCRYPTION_LAYER: LOCKED<br>
            [IO] AWAITING_BIO_PIN_INPUT...
        </div>
        
        <div class="matrix-dots">
            <div class="dot-node" id="n-1"></div>
            <div class="dot-node" id="n-2"></div>
            <div class="dot-node" id="n-3"></div>
            <div class="dot-node" id="n-4"></div>
        </div>

        <div class="numpad-grid">
            <div class="num-btn" onclick="dial(1)">1</div>
            <div class="num-btn" onclick="dial(2)">2</div>
            <div class="num-btn" onclick="dial(3)">3</div>
            <div class="num-btn" onclick="dial(4)">4</div>
            <div class="num-btn" onclick="dial(5)">5</div>
            <div class="num-btn" onclick="dial(6)">6</div>
            <div class="num-btn" onclick="dial(7)">7</div>
            <div class="num-btn" onclick="dial(8)">8</div>
            <div class="num-btn" onclick="dial(9)">9</div>
            <div style="width:82px"></div>
            <div class="num-btn" onclick="dial(0)">0</div>
            <div class="num-btn" onclick="purge()">âŒ«</div>
        </div>
    </div>

    <div id="mainAppShell">
        <div class="app-header">
            <div class="app-logo">PLAN <span>//</span> BISHA</div>
            <div class="app-timer" id="clockHud">00:00:00</div>
        </div>

        <div class="app-feed" id="protocolFeed">
            </div>
    </div>

    <div class="alpha-hud">
        <div class="track-bg">
            <div class="fill-bar" id="quantumBar"></div>
        </div>
        <div class="hud-status" id="hudMetric">
            DATA_STREAM: <b>OFFLINE</b>
        </div>
    </div>

<script>
    /* ==========================================================================
       BISHA ALPHA ENGINE V16.0
       ========================================================================== 
    */
    
    const AUTH_KEY = "5858";
    let pinBuffer = "";

    const TECH_WIKI = {
        CHEST: "https://musclewiki.com/exercises/male/chest",
        BACK: "https://musclewiki.com/exercises/male/lats",
        LEGS: "https://musclewiki.com/exercises/male/quads",
        SHOULDERS: "https://musclewiki.com/exercises/male/shoulders",
        ARMS: "https://musclewiki.com/exercises/male/biceps",
        CARDIO: "https://musclewiki.com/cardio",
        ABS: "https://musclewiki.com/exercises/male/abdominals"
    };

    // JANUARY 2026 PROTOCOL LOAD
    const DATA_SET = [
        {d:"11 JAN", w:"E DIEL", s:[
            {t:"10:00", c:"b-mor", n:"MÃ«ngjesi", d:"Krepa/Petulla"},
            {t:"14:00", c:"b-lun", n:"Dreka", d:"SupÃ« Pule + SallatÃ«"},
            {t:"16:00", c:"b-stu", n:"PUSHIM", d:"E Diela Relax"},
            {t:"20:30", c:"b-sle", n:"Darka", d:"Kos + Fruta"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"Recovery"}
        ], g:{on:false}},

        {d:"12 JAN", w:"E HÃ‹NÃ‹", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"3 VezÃ« + BukÃ« Integrale"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Deri ora 15:00"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Fasule (300g) + Oriz"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Chest & Triceps"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri (Detyra)"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Kos + Arra"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"PUSH (GJOKS)", l:TECH_WIKI.CHEST, x:[{n:"Bench Press",s:"5x5"},{n:"Incline DB",s:"3x10"},{n:"Dips",s:"3xMax"}]}},

        {d:"13 JAN", w:"E MARTÃ‹", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"Tost (2 feta) + Kafe"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: MollÃ«"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Patate Furre + Mish"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Back & Biceps"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri (Lexim)"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Ã‡aj + MjaltÃ«"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"PULL (SHPINÃ‹)", l:TECH_WIKI.BACK, x:[{n:"Deadlift",s:"3x5"},{n:"Rows",s:"4x10"},{n:"Curls",s:"3x12"}]}},

        {d:"14 JAN", w:"E MÃ‹RKURÃ‹", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"TÃ«rshÃ«rÃ« + QumÃ«sht"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Arra"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Makarona (150g)"},
            {t:"17:00", c:"b-stu", n:"PUSHIM AKTIV", d:"Ecje ose Relax"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"PÃ«rgatitje Projekti"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Frut"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:false}},

        {d:"15 JAN", w:"E ENJTE", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"OmÃ«letÃ« me Speca"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Corny"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Presh (300g) + BukÃ«"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Leg Day (KÃ«mbÃ«)"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"VezÃ« e zier (2)"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"LEGS (KÃ‹MBÃ‹)", l:TECH_WIKI.LEGS, x:[{n:"Squats",s:"4x8"},{n:"Leg Press",s:"3x12"},{n:"Calves",s:"4x20"}]}},

        {d:"16 JAN", w:"E PREMTE", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"GjizÃ« + Vaj Ulliri"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Fruta"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"PulÃ« (200g) + Pilaf"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Shoulders & Arms"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Mbyllje Jave"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Kos (200g)"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"UPPER BODY", l:TECH_WIKI.SHOULDERS, x:[{n:"Overhead Press",s:"4x10"},{n:"Lateral Raises",s:"4x15"},{n:"Skullcrushers",s:"3x12"}]}},

        {d:"17 JAN", w:"E SHTUNÃ‹", s:[
            {t:"09:00", c:"b-mor", n:"MÃ«ngjesi", d:"VezÃ« sy (2) + Tost"},
            {t:"14:00", c:"b-lun", n:"Dreka", d:"Ushqim ShtÃ«pie (LirÃ«)"},
            {t:"16:00", c:"b-gym", n:"AKTIVITET", d:"Cardio / Vrap nÃ« NatyrÃ«"},
            {t:"18:00", c:"b-stu", n:"STUDIM", d:"Rishikim Javor"},
            {t:"20:30", c:"b-sle", n:"Darka", d:"Tost"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"CARDIO", l:TECH_WIKI.CARDIO, x:[{n:"Vrapim",s:"30 min"},{n:"Abs",s:"15 min"}]}},

        {d:"18 JAN", w:"E DIEL", s:[
            {t:"10:00", c:"b-mor", n:"MÃ«ngjesi", d:"Krepa"},
            {t:"14:00", c:"b-lun", n:"Dreka", d:"SupÃ«"},
            {t:"16:00", c:"b-stu", n:"PUSHIM", d:"Full Relax"},
            {t:"20:30", c:"b-sle", n:"Darka", d:"Kos"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:false}},

        {d:"19 JAN", w:"E HÃ‹NÃ‹", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"Scrambled Eggs (3)"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Biskota"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Fasule (300g)"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Chest Focus"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Ã‡aj"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"PUSH (GJOKS)", l:TECH_WIKI.CHEST, x:[{n:"Incline Press",s:"4x10"},{n:"Flys",s:"3x15"}]}},

        {d:"20 JAN", w:"E MARTÃ‹", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"TÃ«rshÃ«rÃ«"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: DhallÃ«"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Musaka (300g)"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Back Focus"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Kos"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"PULL (SHPINÃ‹)", l:TECH_WIKI.BACK, x:[{n:"Pullups",s:"3xMax"},{n:"Lat Pull",s:"3x12"}]}},

        {d:"21 JAN", w:"E MÃ‹RKURÃ‹", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"Tost Integral"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Mandarina"},
            {t:"15:30", c:"b-lun", n:"Dreka", d:"Burani (Spinaq)"},
            {t:"17:00", c:"b-stu", n:"PUSHIM AKTIV", d:"Ecje"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Detyra"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"QumÃ«sht"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:false}},

        {d:"22 JAN", w:"E ENJTE", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"2 VezÃ« + Kafe"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Simite"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Presh"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Legs Focus"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Frut"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"LEGS", l:TECH_WIKI.LEGS, x:[{n:"Squats",s:"4x10"},{n:"Calf Raises",s:"4x20"}]}},

        {d:"23 JAN", w:"E PREMTE", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"GjizÃ« + BukÃ«"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Galleta"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Peshk / MÃ«lÃ§i"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Full Body Mix"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Kos"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"FULL BODY", l:TECH_WIKI.SHOULDERS, x:[{n:"Clean & Press",s:"3x10"},{n:"Squat",s:"3x10"}]}},

        {d:"24 JAN", w:"E SHTUNÃ‹", s:[
            {t:"09:00", c:"b-mor", n:"MÃ«ngjesi", d:"OmÃ«letÃ«"},
            {t:"14:00", c:"b-lun", n:"Dreka", d:"ShtÃ«pie"},
            {t:"16:00", c:"b-stu", n:"PUSHIM", d:"-"},
            {t:"20:30", c:"b-sle", n:"Darka", d:"Fruta"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:false}},

        {d:"25 JAN", w:"E DIEL", s:[
            {t:"10:00", c:"b-mor", n:"MÃ«ngjesi", d:"Makarona"},
            {t:"14:00", c:"b-lun", n:"Dreka", d:"SupÃ«"},
            {t:"18:00", c:"b-stu", n:"PUSHIM", d:"-"},
            {t:"20:30", c:"b-sle", n:"Darka", d:"Ã‡aj"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:false}},

        {d:"26 JAN", w:"E HÃ‹NÃ‹", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"OmÃ«letÃ« (3 VezÃ«)"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Banane"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Fasule (300g)"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Chest Focus"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Ã‡aj"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"PUSH", l:TECH_WIKI.CHEST, x:[{n:"Bench Press",s:"4x8"},{n:"Pushups",s:"3xMax"}]}},

        {d:"27 JAN", w:"E MARTÃ‹", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"Tost"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Ã‡oko"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Speca mbushur"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Back Focus"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Kos"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"PULL", l:TECH_WIKI.BACK, x:[{n:"Rows",s:"4x10"},{n:"Curls",s:"3x12"}]}},

        {d:"28 JAN", w:"E MÃ‹RKURÃ‹", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"TÃ«rshÃ«rÃ«"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: Arra"},
            {t:"15:30", c:"b-lun", n:"Dreka", d:"Bamje"},
            {t:"17:00", c:"b-stu", n:"PUSHIM AKTIV", d:"Relax"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Detyra"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"QumÃ«sht"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:false}},

        {d:"29 JAN", w:"E ENJTE", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"2 VezÃ«"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: DhallÃ«"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"Qofte"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Legs Focus"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"VezÃ«"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"LEGS", l:TECH_WIKI.LEGS, x:[{n:"Leg Press",s:"4x12"},{n:"Squat",s:"3x10"}]}},

        {d:"30 JAN", w:"E PREMTE", s:[
            {t:"06:00", c:"b-mor", n:"MÃ«ngjesi", d:"SanduiÃ§ Pule"},
            {t:"08:00", c:"b-sch", n:"ShkollÃ«", d:"Snack: MollÃ«"},
            {t:"15:30", c:"b-lun", n:"Dreka (Pre-Gym)", d:"PulÃ«"},
            {t:"17:00", c:"b-gym", n:"GYM TIME", d:"Upper Body"},
            {t:"19:00", c:"b-sle", n:"Dush/ShtÃ«pi", d:"Recovery"},
            {t:"19:30", c:"b-stu", n:"STUDIM", d:"Inxhinieri"},
            {t:"21:00", c:"b-sle", n:"Darka", d:"Kos"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"UPPER", l:TECH_WIKI.CHEST, x:[{n:"Military Press",s:"4x10"}]}},

        {d:"31 JAN", w:"E SHTUNÃ‹", s:[
            {t:"10:00", c:"b-mor", n:"MÃ«ngjesi", d:"LirÃ«"},
            {t:"14:00", c:"b-lun", n:"Dreka", d:"FESTO (Cheat)"},
            {t:"18:00", c:"b-gym", n:"PESHIMI", d:"Kontroll Mujor"},
            {t:"20:30", c:"b-sle", n:"Darka", d:"Detoks"},
            {t:"22:30", c:"b-sle", n:"GjumÃ«", d:"8 OrÃ«"}
        ], g:{on:true, t:"CHECK", l:TECH_WIKI.ABS, x:[{n:"Peshimi",s:"-"},{n:"Foto",s:"-"}]}}
    ];

    /**
     * LOCK SCREEN HANDLERS
     */
    function dial(n) {
        if (pinBuffer.length < 4) {
            pinBuffer += n;
            const logBox = document.getElementById("bootLogs");
            logBox.innerHTML += `<br>DATA_PKT_RECV: BIT_${n}`;
            logBox.scrollTop = logBox.scrollHeight;
            updateMatrix();
            if (navigator.vibrate) navigator.vibrate(10);
            if (pinBuffer.length === 4) runHandshake();
        }
    }

    function purge() {
        pinBuffer = pinBuffer.slice(0, -1);
        updateMatrix();
    }

    function updateMatrix() {
        for (let i = 1; i <= 4; i++) {
            const dot = document.getElementById(`n-${i}`);
            if (i <= pinBuffer.length) dot.classList.add("active");
            else dot.classList.remove("active");
        }
    }

    function runHandshake() {
        const lock = document.getElementById("terminalLock");
        const logBox = document.getElementById("bootLogs");

        if (pinBuffer === AUTH_KEY) {
            logBox.innerHTML += "<br>HANDSHAKE: SUCCESS... LOADING_ENV";
            if (navigator.vibrate) navigator.vibrate([20, 40, 20]);
            
            lock.style.opacity = "0";
            lock.style.transform = "scale(1.2)";
            
            setTimeout(() => {
                lock.remove(); // Clean exit
                document.getElementById("mainAppShell").style.display = "block";
                document.getElementById("hudMetric").innerHTML = `DATA_STREAM: <b>SYNCHRONIZED</b>`;
                initOS();
            }, 600);
        } else {
            logBox.innerHTML += "<br>HANDSHAKE: FAILURE... UNAUTHORIZED";
            if (navigator.vibrate) navigator.vibrate([80, 40, 80]);
            
            const dots = document.querySelectorAll(".dot-node");
            dots.forEach(d => d.classList.add("breach"));
            lock.style.animation = "jitter-denial 0.4s ease";
            
            setTimeout(() => {
                pinBuffer = "";
                updateMatrix();
                dots.forEach(d => d.classList.remove("breach"));
                lock.style.animation = "";
            }, 500);
        }
    }

    /**
     * MAIN APPLICATION LOGIC
     */
    function initOS() {
        const target = document.getElementById("protocolFeed");
        const todayInt = new Date().getDate(); // 11
        let completedUnits = 0;
        let finalFeedHTML = "";

        DATA_SET.forEach((protocol, index) => {
            const dayDigit = parseInt(protocol.d);
            const storageId = `bisha_v16_data_${dayDigit}`;
            const stateDone = localStorage.getItem(storageId) === "1";
            const isFuture = dayDigit > todayInt;
            const isNow = dayDigit === todayInt;

            if (stateDone) completedUnits++;

            const classString = `data-card 
                ${isNow ? 'active-today' : ''} 
                ${stateDone ? 'done-state' : ''}`;

            finalFeedHTML += `
                <div class="${classString}" id="card-node-${index}" style="animation-delay: ${index * 0.05}s">
                    <div class="card-head">
                        <div>
                            <div class="card-title">${protocol.d}</div>
                            <div class="card-subtitle">${protocol.w}</div>
                        </div>
                        <div class="node-switch ${stateDone ? 'active' : ''}" 
                             onclick="handleToggle(${dayDigit}, ${isFuture}, ${index})">
                            <i>âœ“</i>
                        </div>
                    </div>
                    <div class="card-rows">
                        ${protocol.s.map(row => `
                            <div class="row-item">
                                <div class="badge-tag" style="background:${getBadgeStyle(row.c)}">${row.t}</div>
                                <div class="row-data">
                                    <h4 class="row-name">${row.n}</h4>
                                    <p>${row.d}</p>
                                </div>
                            </div>
                        `).join("")}
                    </div>
                    ${buildGymInterface(protocol)}
                </div>
            `;
        });

        target.innerHTML = finalFeedHTML;
        refreshDockHUD(completedUnits);

        // Auto-Scroll to active date
        setTimeout(() => {
            const activeNode = document.querySelector(".active-today");
            if (activeNode) {
                activeNode.scrollIntoView({ behavior: "smooth", block: "center" });
            }
        }, 400);
    }

    function buildGymInterface(dayObj) {
        if (!dayObj.g.on) {
            return `<div style="padding:15px; text-align:center; color:#333; font-size:10px; font-family:var(--font-code)">
                        [ RECOVERY_MODE: ACTIVE ]
                    </div>`;
        }
        
        const listItems = dayObj.g.x.map(ex => `
            <div class="ex-line">
                <span class="row-name">${ex.n}</span>
                <small>${ex.s}</small>
            </div>
        `).join("");

        return `
            <button class="gym-trigger" 
                    onclick="let p=this.nextElementSibling; p.style.display=p.style.display==='block'?'none':'block'">
                <span>ðŸ’ª PROTOCOL: ${dayObj.g.t}</span>
                <span>â–¼</span>
            </button>
            <div class="gym-panel">
                ${listItems}
                <a href="${dayObj.g.l}" target="_blank" class="wiki-btn">
                    EXECUTE_TECHNIQUE_DATA.EXE
                </a>
            </div>
        `;
    }

    function getBadgeStyle(tag) {
        switch(tag) {
            case 'b-mor': return 'var(--g-sunrise)';
            case 'b-sch': return 'var(--g-electric)';
            case 'b-lun': return 'var(--g-lime)';
            case 'b-gym': return 'var(--g-bisha)';
            case 'b-stu': return 'var(--g-hyper)';
            default: return 'var(--g-void)';
        }
    }

    function handleToggle(id, locked, index) {
        if (locked) {
            const node = document.getElementById(`card-node-${index}`);
            node.classList.add("denied-pulse");
            if (navigator.vibrate) navigator.vibrate(200);
            setTimeout(() => node.classList.remove("denied-pulse"), 450);
            return;
        }

        const sid = `bisha_v16_data_${id}`;
        const val = localStorage.getItem(sid);
        localStorage.setItem(sid, val === "1" ? "0" : "1");
        if (navigator.vibrate) navigator.vibrate(20);
        initOS();
    }

    function refreshDockHUD(solvedCount) {
        const perc = Math.round((solvedCount / DATA_SET.length) * 100);
        document.getElementById("quantumBar").style.width = perc + "%";
        document.getElementById("hudMetric").innerHTML = `DATA_STREAM: <b>${perc}%_SYNCED</b>`;
    }

    // CLOCK TICK
    setInterval(() => {
        const d = new Date();
        document.getElementById("clockHud").innerText = d.toTimeString().split(' ')[0];
    }, 1000);

</script>
</body>
</html>
